{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-70dff3f11804e658.js","src/index.js","src/js/home.js","src/js/create-markup-category-books.js","src/js/storage-servises.js","src/js/category-list.js","src/js/create-markup-home.js","node_modules/@parcel/runtime-js/lib/runtime-04746df128b3d21d.js","node_modules/@parcel/runtime-js/lib/runtime-426c4d5fb9c7101f.js","node_modules/@parcel/runtime-js/lib/runtime-4836a641395b77e3.js","src/js/create-modal.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.df8ede2c.js\\\",\\\"3bIHe\\\":\\\"amazon_link.626c9508.png\\\",\\\"dkcwB\\\":\\\"apple_link.652b354e.png\\\",\\\"2D6jo\\\":\\\"bookshop_link.1d091ebd.png\\\",\\\"cVdZs\\\":\\\"index.5ab9c464.js\\\"}\"));","import './js/queries';\nimport './js/header-current-page';\nimport './js/menu';\nimport './js/home';\nimport './js/create-markup-home';\n// import './js/shopping-list';\n// import './js/create-markup-shopping';\nimport './js/btn';\nimport './js/funds';\nimport './js/support-ukraine';\nimport './js/scroll-up';\nimport './js/theme';\nimport './js/category-list';\nimport './js/login-modal';\nimport './js/swiper';\nimport './js/create-modal';\n","import { apiRequestTopBooks } from './queries';\nimport { createMarkupTopBooks } from './create-markup-home';\nimport { apiRequestCategory } from './queries';\nimport { createMarkupCategory } from './create-markup-category-books';\nimport { saveActiveCategory, changeActiveCategory } from './category-list';\n\nexport { allCategoryCreate };\nconst mainHomeContainerEl = document.querySelector('.js-section-top-books');\n\nfunction allCategoryCreate() {\n  apiRequestTopBooks()\n    .then(data => {\n      const MarkupTopBooks = createMarkupTopBooks(data);\n      mainHomeContainerEl.innerHTML = MarkupTopBooks;\n\n      if (data.page !== data.total_pages) {\n        paginationBtn.hidden = false;\n      }\n      // сброс активной категории\n      saveActiveCategory('All categories');\n      changeActiveCategory();\n    })\n    .catch(err => console.log(err));\n}\n\nallCategoryCreate();\n\n// const seeMoreBtn = document.querySelector('.js-top-books_button');\n\n// seeMoreBtn.addEventListener('click', () => {\n//   apiRequestCategory(category)\n//     .then(data => {\n//       console.log('data :>> ', data);\n//       const MarkupCategory = createMarkupCategory(data);\n//       mainHomeContainerEl.innerHTML = `<h1 class=\"title-top-books\">${category}</h1><div class=\"category-books_container\">${MarkupCategory}</div>`;\n//       // добавление активной категории\n//       saveActiveCategory(category);\n//       changeActiveCategory();\n//     })\n//     .catch(err => console.log(err));\n// });\n\ndocument.body.addEventListener('click', function (event) {\n  if (event.target.classList.contains('js-top-books_button')) {\n    // выполнить функцию для элемента с классом 'js-top-books_button'\n    const category = event.target.getAttribute('data-category');\n\n    apiRequestCategory(category)\n      .then(data => {\n        console.log('data :>> ', data);\n        const MarkupCategory = createMarkupCategory(data);\n        mainHomeContainerEl.innerHTML = `<h1 class=\"title-top-books\">${category}</h1><div class=\"category-books_container\">${MarkupCategory}</div>`;\n        // добавление активной категории\n        saveActiveCategory(category);\n        changeActiveCategory();\n      })\n      .catch(err => console.log(err));\n  }\n});\n","export { createMarkupCategory };\n\nfunction createMarkupCategory(arr) {\n    return arr.map(obj =>\n        `<div class=\"top-books_book\">\n            <img class=\"top-books_image\" src=\"${obj.book_image}\" alt=\"book_image\"  width=\"180\"></img>\n            <h3 class=\"top-books_title\">${obj.title}</h3>\n            <p class=\"top-books_author\">${obj.contributor}</p>\n            <button class='top-books_quick-view ' data-bookId='${obj._id}' type=\"button\">quick view</button>\n        </div>`\n    ).join('');\n}\n","export { remove, load, save };\n\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Remove state error: ', error.message);\n  }\n};\n\nexport default {\n  save,\n  load,\n  remove,\n};\n","import { createMarkupCategory } from './create-markup-category-books';\nimport { apiRequestCategory } from './queries';\nimport { allCategoryCreate } from './home';\n\nimport { save, load } from './storage-servises';\nexport { saveActiveCategory, changeActiveCategory };\n\nconst categoryListEl = document.querySelector('.category-list');\nconst categoryConteiner = document.querySelector('.js-section-top-books');\n\ncategoryListEl.addEventListener('click', async e => {\n  const categoryRequest = e.target.textContent;\n  const categoryRequestTarget = e.target;\n\n  if (e.target.textContent === categoryListEl.textContent) {\n    return;\n  }\n\n  if (categoryRequest === 'All categories') {\n    allCategoryCreate();\n    // добавление активной категории\n    saveActiveCategory(e.target.textContent);\n    changeActiveCategory(categoryRequestTarget);\n  } else {\n    apiRequestCategory(categoryRequest)\n      .then(data => {\n        // console.log(data);\n        const MarkupCategory = createMarkupCategory(data);\n        categoryConteiner.innerHTML = `<h1 class=\"title-top-books\">${e.target.textContent}</h1><div class=\"category-books_container\">${MarkupCategory}</div>`;\n\n        // добавление активной категории\n        saveActiveCategory(e.target.textContent);\n        changeActiveCategory(categoryRequestTarget);\n      })\n      .catch(err => console.log(err));\n  }\n});\n\napiRequestCategoriesList()\n  .then(data => {\n    categoryListEl.insertAdjacentHTML('beforeend', createMarkupCategList(data));\n  })\n  .catch(err => console.log(err));\n\nfunction apiRequestCategoriesList() {\n  const CATEGORIES_URL =\n    'https://books-backend.p.goit.global/books/category-list';\n  return fetch(CATEGORIES_URL).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\nfunction createMarkupCategList(arr) {\n  return arr\n    .map(\n      li => `<li class=\"category-list_item\" data-category='${li.list_name}'>\n        <p class=\"category-list_name\">${li.list_name}</p>\n</li>`\n    )\n    .sort()\n    .join('');\n}\n\nfunction changeActiveCategory() {\n  const nameOfCat = load('activeCategory');\n  const activeCategory = document.querySelector('.active-category');\n  const liEl = document.querySelectorAll('.category-list_item');\n\n  if (activeCategory) {\n    activeCategory.classList.remove('active-category');\n  }\n\n  liEl.forEach(el => {\n    const category = el.getAttribute('data-category');\n    if (category === nameOfCat) {\n      el.classList.add('active-category');\n    }\n  });\n}\n\nfunction saveActiveCategory(value) {\n  save('activeCategory', value);\n}\n","export { createMarkupTopBooks };\n\nfunction createMarkupTopBooks(arr) {\n  const markup = arr\n    .map(obj => {\n      const booksMarkup = obj.books\n        .map(\n          obj => `<li class=\"top-books_list list\">\n    <div class=\"top-books_book\">\n        <img class=\"top-books_image\" src=\"${obj.book_image}\" alt=\"book_image\"  width=\"180\">\n        <h3 class=\"top-books_title\">${obj.title}</h3>\n        <p class=\"top-books_author\">${obj.contributor}</p>\n        <button class='top-books_quick-view ' data-bookId='${obj._id}' type=\"button\">quick view</button></div>\n  \n</li>`\n        )\n        .join('');\n      return `\n      <ul class=\"top-books\">\n      <p class=\"top-books_category\">${obj.list_name}</p>\n      <div class=\"top-books_container\">${booksMarkup}</div>\n      <div class=\"js-top-books_button top-books_button link\" data-category='${obj.list_name}'>see more</div>\n      </ul>`;\n    })\n    .join('');\n  return `<h1 class=\"title-top-books\">Best Sellers <span>Books</span></h1><div class=\"js-top-books-container\">${markup}</div>`;\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3bIHe\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dkcwB\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2D6jo\")).toString();","import amazonImg from '../images/amazon_link.png';\nimport appleImg from '../images/apple_link.png';\nimport bookshopImg from '../images/bookshop_link.png';\nimport storageServises from './storage-servises';\n\n// export {onCloseModal}\n\n// import { initializeApp } from 'firebase/app';\n\nimport 'firebase/auth';\n\n// import {\n//   getAuth,\n//   onAuthStateChanged,\n//   signOut,\n//   createUserWithEmailAndPassword,\n// } from 'firebase/auth';\n\n// import {\n//   getDatabase,\n//   ref,\n//   set,\n//   child,\n//   update,\n//   remove,\n//   get,\n//   onValue,\n// } from 'firebase/database';\n\nimport { addbooktosl, removeBook } from './login-modal';\n// import { async } from '@firebase/util';\n\nconst bookQuikWiew = document.querySelector('.main');\nconst modalElement = document.querySelector('.modal_pop-up__container');\nconst modalInfo = document.querySelector('.modal_pop-up__description');\nconst bookDescription = document.querySelector('.no-description');\nconst backdrop = document.querySelector('.backdrop_pop-up');\nconst closeModalBtn = document.querySelector('.modal_pop-up__close-btn');\n\n// const SHOP_LIST_KEY = 'selected-books';\n\nbookQuikWiew.addEventListener('click', onOpenModal);\ncloseModalBtn.addEventListener('click', onCloseModal);\n\nlet bookItem;\n\nexport async function onOpenModal(evt) {\n  if (!evt.target.closest('.top-books_quick-view')) return;\n\n  const bookId = evt.target\n    .closest('.top-books_quick-view')\n    .getAttribute('data-bookId');\n  bookItem = bookId;\n  // console.log(bookId);\n\n  backdrop.classList.remove('backdrop_pop-up--is-hidden');\n  backdrop.addEventListener('click', handleBackdropClick);\n  closeModalBtn.addEventListener('click', onCloseModal);\n  window.addEventListener('keydown', onEscKeyPress);\n\n  await renderBookById(bookId);\n\n  // const buttonModalRemoveBook = document.querySelector('.modal__btn-remove');\n  // buttonModalRemoveBook.addEventListener('click', removeee)\n\n  // function removeee() {\n  //     console.log('cliiiiick')\n  // }\n\n  // await\n\n  // const addAAbook = document.querySelector('.modal__btn-add');\n  // addAAbook.addEventListener('click', addbooktosl(bookId));\n}\n\nfunction onCloseModal() {\n  backdrop.classList.toggle('backdrop_pop-up--is-hidden');\n  backdrop.removeEventListener('click', handleBackdropClick);\n  closeModalBtn.removeEventListener('click', onCloseModal);\n  window.removeEventListener('keydown', onEscKeyPress);\n\n  modalInfo.innerHTML = '';\n}\n\nfunction onEscKeyPress(event) {\n  if (event.code === 'Escape') {\n    onCloseModal();\n  }\n}\n\nfunction handleBackdropClick(event) {\n  if (event.target === event.currentTarget) {\n    onCloseModal();\n  }\n}\n\n// function checkUserIn() {\n//   onAuthStateChanged(auth, user => {\n//     if (user) {\n//       // checkname();\n//       // checkId();\n//       // getAddedBooks();\n\n//       // ...\n//     } else {\n//       NoLoginTxt.style.display = 'block';\n//     }\n//   });\n// }\n\nasync function renderBookById(bookId) {\n  modalElement.innerHTML = '';\n\n  try {\n    const book = await getBookById(bookId);\n\n    storageServises.save('active-book', book);\n\n    const bookInStorage = Boolean(\n      storageServises.load('selected-books')?.find(el => el._id === book._id)\n    );\n\n    const { book_image, title, author, description, buy_links } = book;\n\n    if (description === '') {\n      bookDescription.innerHTML = 'We hope you will love it';\n    } else {\n      bookDescription.innerHTML = '';\n    }\n\n    const markup = `<div class=\"modal-info\">\n    <img class=\"book__img\" src=\"${book_image}\" alt=\"${title}\"/>\n    <div class=\"modal-info__box\">\n       <h2 class=\"book__title\">${title}</h2>\n       <h3 class=\"book__author\">${author}</h3>\n       <p class=\"book__description\">${description}</p>\n       <ul class=\"list seller__list\">\n         <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[0].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Amazon\">\n                <img src=\"${amazonImg}\" alt=\"amazon\" />\n              </a>\n            </li>\n            <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[1].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Apple-books\">\n                <img src=\"${appleImg}\" alt=\"apple-books\" />\n              </a>\n            </li>\n            <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[4].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Bookshop\">\n                <img src=\"${bookshopImg}\" alt=\"bookshop\" />\n              </a>\n            </li>\n       </ul>\n       </div>\n    </div>\n    <button class=\"btn modal__btn-add\" type=\"button\"\n    data-bookId='${bookId}'>${\n      bookInStorage ? 'remove from the shopping list' : 'add to shopping list'\n    }</button>\n    <button class=\"btn modal__btn-remove\" data-bookId='${bookId}' type=\"button\">remove from the shopping list</button>\n    <p class=\"modal__btn-text\">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    <p class=\"modal__btn-need-login\">First you need to login</p>`;\n\n    // <button class=\"btn modal__btn-remove\" type=\"button\">remove from the shopping list</button>\n    //   <p class=\"modal__btn-text\">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n\n    modalElement.innerHTML = markup;\n\n    const removeBtn = document.querySelector('.modal__btn-remove');\n    const NoLoginTxt = document.querySelector('.modal__btn-need-login');\n    const addABook = document.querySelector('.modal__btn-add');\n    const congratulationMsg = document.querySelector('.modal__btn-text');\n\n    addABook.addEventListener('click', event => {\n      const bookId = event.target.getAttribute('data-bookId');\n\n      addbooktosl(bookId);\n      removeBtn.style.display = 'block';\n      addABook.style.display = 'none';\n      congratulationMsg.style.display = 'block';\n      setTimeout(() => {\n        congratulationMsg.style.display = 'none';\n      }, 6500);\n    });\n\n    removeBtn.addEventListener('click', event => {\n      const bookId = event.target.getAttribute('data-bookId');\n      // checkYouHaveBook(bookId);\n      removeBook(bookId);\n      removeBtn.style.display = 'none';\n      addABook.style.display = 'block';\n      congratulationMsg.style.display = 'none';\n    });\n\n    function checkYouHaveBook(bookId) {\n      const userDataString = getUserData();\n      userDataString.books.map(book => {\n        if (book === bookId) {\n          removeBtn.style.display = 'block';\n          addABook.style.display = 'none';\n          congratulationMsg.style.display = 'none';\n        }\n      });\n    }\n\n    function checkUserIn() {\n      const userDataString = getUserData();\n      if (!userDataString) {\n        NoLoginTxt.style.display = 'block';\n        removeBtn.style.display = 'none';\n        addABook.style.display = 'none';\n      }\n    }\n\n    checkUserIn();\n    checkYouHaveBook(bookId);\n\n    const linksShops = document.querySelectorAll('.modal__link');\n    onLinksClick(linksShops);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction getUserData() {\n  const userDataString = localStorage.getItem('userdata');\n  if (userDataString) {\n    const userData = JSON.parse(userDataString);\n    return userData;\n  } else {\n    return null;\n  }\n}\n\n\nfunction onLinksClick(links) {\n  for (let i = 0; i < links.length; i++) {\n    let link = links[i];\n    link.addEventListener('click', function (e) {\n      e.preventDefault();\n      window.open(this.href);\n    });\n  }\n}\n\nconst BASE_URL = 'https://books-backend.p.goit.global/books/';\n\nasync function getBookById(bookId) {\n  const URL = `${BASE_URL}${bookId}`;\n  const resp = await fetch(URL);\n  if (!resp.ok) {\n    throw new Error(resp.statusText);\n  }\n  return await resp.json();\n}\n"],"names":["parcelRequire","register","JSON","parse","$j2XVn","$fdb2557f1305227b$export$5c6c81f9c5a88dc","arr","map","obj","book_image","title","contributor","_id","join","$1bc94850faccf779$export$a1544dad697b423d","key","value","serializedState","stringify","localStorage","setItem","error","console","message","$1bc94850faccf779$export$11e63f7b0f3d9900","getItem","undefined","$1bc94850faccf779$export$2e2bcd8739ae039","removeItem","$8f83142a7678b8c4$var$categoryListEl","document","querySelector","$8f83142a7678b8c4$var$categoryConteiner","$8f83142a7678b8c4$export$8754fe332e345678","nameOfCat","activeCategory","liEl","querySelectorAll","classList","remove","forEach","el","getAttribute","add","$8f83142a7678b8c4$export$eb2c8698cba8aabd","addEventListener","async","e","categoryRequest","target","textContent","$7a8fb0f659835779$export$ce3b903fddb06c5d","apiRequestCategory","then","data","MarkupCategory","innerHTML","catch","err","log","fetch","resp","ok","Error","statusText","json","insertAdjacentHTML","li","list_name","sort","$7a8fb0f659835779$var$mainHomeContainerEl","apiRequestTopBooks","MarkupTopBooks","booksMarkup","books","page","total_pages","paginationBtn","hidden","body","event","contains","category","$90334eaed38668a9$exports","URL","resolve","url","toString","$c7fab019eef52cc4$exports","$412313614dee0bc4$exports","$533d9e23a3a7af46$var$bookQuikWiew","$533d9e23a3a7af46$var$modalElement","$533d9e23a3a7af46$var$modalInfo","$533d9e23a3a7af46$var$bookDescription","$533d9e23a3a7af46$var$backdrop","$533d9e23a3a7af46$var$closeModalBtn","$533d9e23a3a7af46$var$bookItem","$533d9e23a3a7af46$var$onCloseModal","toggle","removeEventListener","$533d9e23a3a7af46$var$handleBackdropClick","window","$533d9e23a3a7af46$var$onEscKeyPress","code","currentTarget","$533d9e23a3a7af46$var$getUserData","userDataString","evt","closest","bookId","book","$533d9e23a3a7af46$var$BASE_URL","$533d9e23a3a7af46$var$getBookById","save","bookInStorage","Boolean","load","find","author","description","buy_links","markup","$parcel$interopDefault","removeBtn","NoLoginTxt","addABook","congratulationMsg","checkYouHaveBook","style","display","checkUserIn","$gY4QW","addbooktosl","setTimeout","removeBook","links","i","length","preventDefault","open","this","href","$533d9e23a3a7af46$var$onLinksClick","$533d9e23a3a7af46$var$renderBookById"],"version":3,"file":"index.df8ede2c.js.map"}