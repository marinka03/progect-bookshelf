function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},s=t.parcelRequired7c6;null==s&&((s=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var s={id:e,exports:{}};return o[e]=s,t.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){n[e]=t},t.parcelRequired7c6=s),s("kyEFX").register(JSON.parse('{"5ZPII":"index.968516c1.js","3bIHe":"amazon_link.626c9508.png","dkcwB":"apple_link.652b354e.png","2D6jo":"bookshop_link.1d091ebd.png","kJ0nz":"index.25c95898.js"}')),s("j2XVn"),s("92F0t"),s("4dIBK");var a=s("j2XVn");s("j2XVn");function l(e){return e.map((e=>`<div class="top-books_book">\n            <img class="top-books_image" src="${e.book_image}" alt="book_image"  width="180"></img>\n            <h3 class="top-books_title">${e.title}</h3>\n            <p class="top-books_author">${e.contributor}</p>\n            <button class='top-books_quick-view ' data-bookId='${e._id}' type="button">quick view</button>\n        </div>`)).join("")}a=s("j2XVn");const r=(e,t)=>{try{const o=JSON.stringify(t);localStorage.setItem(e,o)}catch(e){console.error("Set state error: ",e.message)}},i=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}};var c={save:r,load:i,remove:e=>{try{localStorage.removeItem(e)}catch(e){console.error("Remove state error: ",e.message)}}};const d=document.querySelector(".category-list"),p=document.querySelector(".js-section-top-books");function u(){const e=i("activeCategory"),t=document.querySelector(".active-category"),o=document.querySelectorAll(".category-list_item");t&&t.classList.remove("active-category"),o.forEach((t=>{t.getAttribute("data-category")===e&&t.classList.add("active-category")}))}function b(e){r("activeCategory",e)}d.addEventListener("click",(async e=>{const t=e.target.dataset.category||e.target.textContent;e.target;e.target.textContent!==d.textContent&&("All categories"===t?(g(),b(e.target.textContent),u()):(0,a.apiRequestCategory)(t).then((t=>{const o=l(t),n=e.target.textContent.split(" "),s=n.pop(),a=`${n.join(" ")} <span style="color: #4f2ee8;">${s}</span>`;p.innerHTML=`<h1 class="title-top-books">${a}</h1><div class="category-books_container">${o}</div>`,b(e.target.textContent),u()})).catch((e=>console.log(e))))})),fetch("https://books-backend.p.goit.global/books/category-list").then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).then((e=>{d.insertAdjacentHTML("beforeend",e.map((e=>`<li class="category-list_item" data-category='${e.list_name}'>\n        <p class="category-list_name">${e.list_name}</p>\n</li>`)).sort().join(""))})).catch((e=>console.log(e)));const k=document.querySelector(".js-section-top-books");function g(){(0,a.apiRequestTopBooks)().then((e=>{const t=`<h1 class="title-top-books">Best Sellers <span>Books</span></h1><div class="js-top-books-container">${e.map((e=>{const t=e.books.map((e=>`<li class="top-books_list list">\n    <div class="top-books_book">\n        <img class="top-books_image" src="${e.book_image}" alt="book_image"  width="180">\n        <h3 class="top-books_title">${e.title}</h3>\n        <p class="top-books_author">${e.contributor}</p>\n        <button class='top-books_quick-view ' data-bookId='${e._id}' type="button">quick view</button></div>\n  \n</li>`)).join("");return`\n      <div class="top-books">\n      <h2 class="top-books_category">${e.list_name}</h2>\n      <ul class="top-books_container">${t}</ul>\n      <div class="js-top-books_button top-books_button link" data-category='${e.list_name}'>see more</div>\n      </div>`})).join("")}</div>`;k.innerHTML=t,e.page!==e.total_pages&&(paginationBtn.hidden=!1),(0,a.hideLoader)(),b("All categories"),u()})).catch((e=>console.log(e)))}g(),document.body.addEventListener("click",(function(e){if(e.target.classList.contains("js-top-books_button")){const t=e.target.getAttribute("data-category");(0,a.apiRequestCategory)(t).then((e=>{const o=l(e),n=t.split(" "),s=n.pop(),a=`${n.join(" ")} <span style="color: #4f2ee8;">${s}</span>`;k.innerHTML=`<h1 class="title-top-books">${a}</h1><div class="category-books_container">${o}</div>`,b(t),u()})).catch((e=>console.log(e)))}})),s("hvEUv"),s("fKLyw"),s("75VGX"),s("74Aiq"),s("4S0r6"),s("gY4QW"),s("eqJOk");var _={};_=new URL(s("kyEFX").resolve("3bIHe"),import.meta.url).toString();var y={};y=new URL(s("kyEFX").resolve("dkcwB"),import.meta.url).toString();var m={};m=new URL(s("kyEFX").resolve("2D6jo"),import.meta.url).toString(),s("eyjy7");var v=s("7Y9D8"),h=s("gY4QW");const f=document.querySelector(".main"),w=document.querySelector(".modal_pop-up__container"),$=document.querySelector(".modal_pop-up__description"),S=document.querySelector(".no-description"),L=document.querySelector(".backdrop_pop-up"),q=document.querySelector(".modal_pop-up__close-btn");let E;function j(){L.classList.toggle("backdrop_pop-up--is-hidden"),L.removeEventListener("click",x),q.removeEventListener("click",j),window.removeEventListener("keydown",H),$.innerHTML=""}function H(e){"Escape"===e.code&&j()}function x(e){e.target===e.currentTarget&&j()}function A(){const e=localStorage.getItem("userdata");if(e){return JSON.parse(e)}return null}f.addEventListener("click",(async function(t){if(!t.target.closest(".top-books_quick-view"))return;const o=t.target.closest(".top-books_quick-view").getAttribute("data-bookId");E=o,L.classList.remove("backdrop_pop-up--is-hidden"),L.addEventListener("click",x),q.addEventListener("click",j),window.addEventListener("keydown",H),await async function(t){w.innerHTML="";try{const s=await async function(e){const t=`${T}${e}`,o=await fetch(t);if(!o.ok)throw new Error(o.statusText);return await o.json()}(t);c.save("active-book",s);const a=Boolean(c.load("selected-books")?.find((e=>e._id===s._id))),{book_image:l,title:r,author:i,description:d,buy_links:p}=s;S.innerHTML=""===d?"We hope you will love it":"";const u=`<div class="modal-info">\n    <img class="book__img" src="${l}" alt="${r}"/>\n    <div class="modal-info__box">\n       <h2 class="book__title">${r}</h2>\n       <h3 class="book__author">${i}</h3>\n       <p class="book__description">${d}</p>\n       <ul class="list seller__list">\n         <li>\n              <a class="seller__link" href="${p[0].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Amazon">\n                <img src="${e(_)}" alt="amazon" class="seller__pic" />\n              </a>\n            </li>\n            <li>\n              <a class="seller__link" href="${p[1].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Apple-books">\n                <img src="${e(y)}" alt="apple-books" class="seller__pic"/>\n              </a>\n            </li>\n            <li>\n              <a class="seller__link" href="${p[4].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Bookshop">\n                <img src="${e(m)}" alt="bookshop" class="seller__pic"/>\n              </a>\n            </li>\n       </ul>\n       </div>\n    </div>\n    <button class="btn modal__btn-add" type="button"\n    data-bookId='${t}'>${a?"remove from the shopping list":"add to shopping list"}</button>\n    <button class="btn modal__btn-remove" data-bookId='${t}' type="button">remove from the shopping list</button>\n    <p class="modal__btn-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    <p class="modal__btn-need-login">First you need to login</p>`;w.innerHTML=u;const b=document.querySelector(".modal__btn-remove"),k=document.querySelector(".modal__btn-need-login"),g=document.querySelector(".modal__btn-add"),f=document.querySelector(".modal__btn-text");function o(t){A().books.map((o=>{o===t&&(b.style.display="block",g.style.display="none",f.style.display="none",e(v).Notify.warning("You already have this book"))}))}function n(){A()||(k.style.display="block",b.style.display="none",g.style.display="none")}g.addEventListener("click",(e=>{const t=e.target.getAttribute("data-bookId");(0,h.addbooktosl)(t),b.style.display="block",g.style.display="none",f.style.display="block",setTimeout((()=>{f.style.display="none"}),6500)})),b.addEventListener("click",(e=>{const t=e.target.getAttribute("data-bookId");(0,h.removeBook)(t),b.style.display="none",g.style.display="block",f.style.display="none"})),n(),o(t);!function(e){for(let t=0;t<e.length;t++){e[t].addEventListener("click",(function(e){e.preventDefault(),window.open(this.href)}))}}(document.querySelectorAll(".modal__link"))}catch($){console.log($)}}(o)})),q.addEventListener("click",j);const T="https://books-backend.p.goit.global/books/";
//# sourceMappingURL=index.968516c1.js.map
