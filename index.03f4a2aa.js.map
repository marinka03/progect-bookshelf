{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-7f2c3ff9ca8097ee.js","src/index.js","src/js/home.js","src/js/create-markup-category-books.js","src/js/storage-servises.js","src/js/category-list.js","src/js/create-markup-home.js","node_modules/@parcel/runtime-js/lib/runtime-5d1d3f7f2f9a5260.js","node_modules/@parcel/runtime-js/lib/runtime-a9387971e7ab79a5.js","node_modules/@parcel/runtime-js/lib/runtime-2279fdd1664f2895.js","src/js/create-modal.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"EVgbq\\\":\\\"index.03f4a2aa.js\\\",\\\"9qBCW\\\":\\\"amazon_link.626c9508.png\\\",\\\"gTCLq\\\":\\\"apple_link.652b354e.png\\\",\\\"7wZd0\\\":\\\"bookshop_link.1d091ebd.png\\\",\\\"eJWEp\\\":\\\"index.587fa946.js\\\"}\"));","import './js/queries';\nimport './js/header-current-page';\nimport './js/menu';\nimport './js/home';\nimport './js/create-markup-home';\n// import './js/shopping-list';\n// import './js/create-markup-shopping';\nimport './js/btn';\nimport './js/funds';\nimport './js/support-ukraine';\nimport './js/scroll-up';\nimport './js/theme';\nimport './js/category-list';\nimport './js/login-modal';\nimport './js/swiper';\nimport './js/create-modal';\n","import { apiRequestTopBooks } from './queries';\nimport { createMarkupTopBooks } from './create-markup-home';\nimport { apiRequestCategory } from './queries';\nimport { createMarkupCategory } from './create-markup-category-books';\nimport { save, load, remove } from './storage-servises';\nimport { saveActiveCategory, changeActiveCategory } from './category-list';\n\nexport { allCategoryCreate };\nconst mainHomeContainerEl = document.querySelector('.js-section-top-books');\n\nfunction allCategoryCreate() {\n  apiRequestTopBooks()\n    .then(data => {\n      const MarkupTopBooks = createMarkupTopBooks(data);\n      mainHomeContainerEl.innerHTML = MarkupTopBooks;\n\n      if (data.page !== data.total_pages) {\n        paginationBtn.hidden = false;\n      }\n      // сброс активной категории\n      saveActiveCategory('All categories');\n    })\n    .catch(err => console.log(err));\n}\n\nallCategoryCreate();\n// changeActiveCategory();\n\ndocument.body.addEventListener('click', function (event) {\n  if (event.target.classList.contains('js-top-books_button')) {\n    // выполнить функцию для элемента с классом 'js-top-books_button'\n    const category = event.target.getAttribute('data-category');\n\n    apiRequestCategory(category)\n      .then(data => {\n        console.log('data :>> ', data);\n        const MarkupCategory = createMarkupCategory(data);\n        mainHomeContainerEl.innerHTML = `<h1 class=\"title-top-books\">${category}</h1><div class=\"category-books_container\">${MarkupCategory}</div>`;\n        // добавление активной категории\n        saveActiveCategory(category);\n        // changeActiveCategory(categoryEl);\n      })\n      .catch(err => console.log(err));\n  }\n});\n","export { createMarkupCategory };\n\nfunction createMarkupCategory(arr) {\n    return arr.map(obj =>\n        `<div class=\"top-books_book\">\n            <img class=\"top-books_image\" src=\"${obj.book_image}\" alt=\"book_image\"  width=\"180\"></img>\n            <h3 class=\"top-books_title\">${obj.title}</h3>\n            <p class=\"top-books_author\">${obj.contributor}</p>\n            <button class='top-books_quick-view ' data-bookId='${obj._id}' type=\"button\">quick view</button>\n        </div>`\n    ).join('');\n}\n","export { remove, load, save };\n\nconst save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Remove state error: ', error.message);\n  }\n};\n\nexport default {\n  save,\n  load,\n  remove,\n};\n","import { createMarkupCategory } from './create-markup-category-books';\nimport { apiRequestCategory } from './queries';\nimport { allCategoryCreate } from './home';\n\nimport { save, load, remove } from './storage-servises';\nexport { saveActiveCategory, changeActiveCategory };\n\nconst categoryListEl = document.querySelector('.category-list');\nconst categoryConteiner = document.querySelector('.js-section-top-books');\nconst allCategoryEl = document.querySelector('.all-category');\n\ncategoryListEl.addEventListener('click', async e => {\n  const categoryRequest = e.target.textContent;\n  const categoryRequestTarget = e.target;\n\n  if (e.target.textContent === categoryListEl.textContent) {\n    return;\n  }\n\n  if (categoryRequest === 'All categories') {\n    allCategoryCreate();\n    // добавление активной категории\n    saveActiveCategory(e.target.textContent);\n    changeActiveCategory(categoryRequestTarget);\n  } else {\n    apiRequestCategory(categoryRequest)\n      .then(data => {\n        // console.log(data);\n        const MarkupCategory = createMarkupCategory(data);\n        categoryConteiner.innerHTML = `<h1 class=\"title-top-books\">${e.target.textContent}</h1><div class=\"category-books_container\">${MarkupCategory}</div>`;\n\n        // добавление активной категории\n        saveActiveCategory(e.target.textContent);\n        changeActiveCategory(categoryRequestTarget);\n      })\n      .catch(err => console.log(err));\n  }\n});\n\napiRequestCategoriesList()\n  .then(data => {\n    categoryListEl.insertAdjacentHTML('beforeend', createMarkupCategList(data));\n  })\n  .catch(err => console.log(err));\n\nfunction apiRequestCategoriesList() {\n  const CATEGORIES_URL =\n    'https://books-backend.p.goit.global/books/category-list';\n  return fetch(CATEGORIES_URL).then(resp => {\n    if (!resp.ok) {\n      throw new Error(resp.statusText);\n    }\n    return resp.json();\n  });\n}\n\n// function apiRequestByCategory(category) {\n//   const CATEGORY_URL = `https://books-backend.p.goit.global/books/category?category=${category}`;\n//   return fetch(CATEGORY_URL).then(resp => {\n//     if (!resp.ok) {\n//       throw new Error(resp.statusText);\n//     }\n//     return resp.json();\n//   });\n// }\n\nfunction createMarkupCategList(arr) {\n  return arr\n    .map(\n      li => `<li class=\"category-list_item\">\n        <p class=\"category-list_name\">${li.list_name}</p>\n</li>`\n    )\n    .sort()\n    .join('');\n}\n\n// export { createMarkupCategList };\n\nfunction changeActiveCategory(el) {\n  const nameOfCat = load('activeCategory');\n  const activeCategory = document.querySelector('.active-category');\n\n  activeCategory.classList.remove('active-category');\n  el.classList.add('active-category');\n}\n\nfunction saveActiveCategory(value) {\n  save('activeCategory', value);\n}\n","export { createMarkupTopBooks };\n\nfunction createMarkupTopBooks(arr) {\n  const markup = arr\n    .map(obj => {\n      const booksMarkup = obj.books\n        .map(\n          obj => `<li class=\"top-books_list list\">\n    <div class=\"top-books_book\">\n        <img class=\"top-books_image\" src=\"${obj.book_image}\" alt=\"book_image\"  width=\"180\">\n        <h3 class=\"top-books_title\">${obj.title}</h3>\n        <p class=\"top-books_author\">${obj.contributor}</p>\n        <button class='top-books_quick-view ' data-bookId='${obj._id}' type=\"button\">quick view</button></div>\n  \n</li>`\n        )\n        .join('');\n      return `\n      <ul class=\"top-books\">\n      <p class=\"top-books_category\">${obj.list_name}</p>\n      <div class=\"top-books_container\">${booksMarkup}</div>\n      <div class=\"js-top-books_button top-books_button link\" data-category='${obj.list_name}'>see more</div>\n      </ul>`;\n    })\n    .join('');\n  return `<h1 class=\"title-top-books\">Best Sellers <span>Books</span></h1><div class=\"js-top-books-container\">${markup}</div>`;\n}\n","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"9qBCW\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"gTCLq\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"7wZd0\");","import amazonImg from '../images/amazon_link.png';\nimport appleImg from '../images/apple_link.png';\nimport bookshopImg from '../images/bookshop_link.png';\nimport storageServises from './storage-servises';\n\n// export {onCloseModal}\n\nimport { initializeApp } from 'firebase/app';\n\nimport 'firebase/auth';\n\nimport {\n  getAuth,\n  onAuthStateChanged,\n  signOut,\n  createUserWithEmailAndPassword,\n} from 'firebase/auth';\n\nimport {\n  getDatabase,\n  ref,\n  set,\n  child,\n  update,\n  remove,\n  get,\n  onValue,\n} from 'firebase/database';\n\nimport { addbooktosl, removeBook } from './login-modal';\nimport { async } from '@firebase/util';\n\nconst bookQuikWiew = document.querySelector('.main');\nconst modalElement = document.querySelector('.modal_pop-up__container');\nconst modalInfo = document.querySelector('.modal_pop-up__description');\nconst bookDescription = document.querySelector('.no-description');\nconst backdrop = document.querySelector('.backdrop_pop-up');\nconst closeModalBtn = document.querySelector('.modal_pop-up__close-btn');\n\n// const SHOP_LIST_KEY = 'selected-books';\n\nbookQuikWiew.addEventListener('click', onOpenModal);\ncloseModalBtn.addEventListener('click', onCloseModal);\n\nlet bookItem;\n\nexport async function onOpenModal(evt) {\n  if (!evt.target.closest('.top-books_quick-view')) return;\n\n  const bookId = evt.target\n    .closest('.top-books_quick-view')\n    .getAttribute('data-bookId');\n  bookItem = bookId;\n  console.log(bookId);\n\n  backdrop.classList.remove('backdrop_pop-up--is-hidden');\n  backdrop.addEventListener('click', handleBackdropClick);\n  closeModalBtn.addEventListener('click', onCloseModal);\n  window.addEventListener('keydown', onEscKeyPress);\n\n  await renderBookById(bookId);\n\n  // const buttonModalRemoveBook = document.querySelector('.modal__btn-remove');\n  // buttonModalRemoveBook.addEventListener('click', removeee)\n\n  // function removeee() {\n  //     console.log('cliiiiick')\n  // }\n\n  // await\n\n  // const addAAbook = document.querySelector('.modal__btn-add');\n  // addAAbook.addEventListener('click', addbooktosl(bookId));\n}\n\nfunction onCloseModal() {\n  backdrop.classList.toggle('backdrop_pop-up--is-hidden');\n  backdrop.removeEventListener('click', handleBackdropClick);\n  closeModalBtn.removeEventListener('click', onCloseModal);\n  window.removeEventListener('keydown', onEscKeyPress);\n\n  modalInfo.innerHTML = '';\n}\n\nfunction onEscKeyPress(event) {\n  if (event.code === 'Escape') {\n    onCloseModal();\n  }\n}\n\nfunction handleBackdropClick(event) {\n  if (event.target === event.currentTarget) {\n    onCloseModal();\n  }\n}\n\n// function checkUserIn() {\n//   onAuthStateChanged(auth, user => {\n//     if (user) {\n//       // checkname();\n//       // checkId();\n//       // getAddedBooks();\n\n//       // ...\n//     } else {\n//       NoLoginTxt.style.display = 'block';\n//     }\n//   });\n// }\n\nasync function renderBookById(bookId) {\n  modalElement.innerHTML = '';\n\n  try {\n    const book = await getBookById(bookId);\n\n    storageServises.save('active-book', book);\n\n    const bookInStorage = Boolean(\n      storageServises.load('selected-books')?.find(el => el._id === book._id)\n    );\n\n    const { book_image, title, author, description, buy_links } = book;\n\n    if (description === '') {\n      bookDescription.innerHTML = 'We hope you will love it';\n    } else {\n      bookDescription.innerHTML = '';\n    }\n\n    const markup = `<div class=\"modal-info\">\n    <img class=\"book__img\" src=\"${book_image}\" alt=\"${title}\"/>\n    <div class=\"modal-info__box\">\n       <h2 class=\"book__title\">${title}</h2>\n       <h3 class=\"book__author\">${author}</h3>\n       <p class=\"book__description\">${description}</p>\n       <ul class=\"list seller__list\">\n         <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[0].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Amazon\">\n                <img src=\"${amazonImg}\" alt=\"amazon\" />\n              </a>\n            </li>\n            <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[1].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Apple-books\">\n                <img src=\"${appleImg}\" alt=\"apple-books\" />\n              </a>\n            </li>\n            <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[4].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Bookshop\">\n                <img src=\"${bookshopImg}\" alt=\"bookshop\" />\n              </a>\n            </li>\n       </ul>\n       </div>\n    </div>\n    <button class=\"btn modal__btn-add\" type=\"button\"\n    data-bookId='${bookId}'>${\n      bookInStorage ? 'remove from the shopping list' : 'add to shopping list'\n    }</button>\n    <button class=\"btn modal__btn-remove\" data-bookId='${bookId}' type=\"button\">remove from the shopping list</button>\n    <p class=\"modal__btn-text\">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    <p class=\"modal__btn-need-login\">First you need to login</p>`;\n\n    // <button class=\"btn modal__btn-remove\" type=\"button\">remove from the shopping list</button>\n    //   <p class=\"modal__btn-text\">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n\n    modalElement.innerHTML = markup;\n\n    const removeBtn = document.querySelector('.modal__btn-remove');\n    const NoLoginTxt = document.querySelector('.modal__btn-need-login');\n    const addABook = document.querySelector('.modal__btn-add');\n    const congratulationMsg = document.querySelector('.modal__btn-text');\n\n    addABook.addEventListener('click', event => {\n      const bookId = event.target.getAttribute('data-bookId');\n\n      addbooktosl(bookId);\n      removeBtn.style.display = 'block';\n      addABook.style.display = 'none';\n      congratulationMsg.style.display = 'block';\n      setTimeout(() => {\n        congratulationMsg.style.display = 'none';\n      }, 6500);\n    });\n\n    removeBtn.addEventListener('click', event => {\n      const bookId = event.target.getAttribute('data-bookId');\n      // checkYouHaveBook(bookId);\n      removeBook(bookId);\n      removeBtn.style.display = 'none';\n      addABook.style.display = 'block';\n      congratulationMsg.style.display = 'none';\n    });\n\n    function checkYouHaveBook(bookId) {\n      const userDataString = getUserData();\n      userDataString.books.map(book => {\n        if (book === bookId) {\n          removeBtn.style.display = 'block';\n          addABook.style.display = 'none';\n          congratulationMsg.style.display = 'none';\n        }\n      });\n    }\n\n    function checkUserIn() {\n      const userDataString = getUserData();\n      if (!userDataString) {\n        NoLoginTxt.style.display = 'block';\n        removeBtn.style.display = 'none';\n        addABook.style.display = 'none';\n      }\n    }\n\n    checkUserIn();\n    checkYouHaveBook(bookId);\n\n    const linksShops = document.querySelectorAll('.modal__link');\n    onLinksClick(linksShops);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction getUserData() {\n  const userDataString = localStorage.getItem('userdata');\n  if (userDataString) {\n    const userData = JSON.parse(userDataString);\n    return userData;\n  } else {\n    return null;\n  }\n}\nconsole.log(getUserData());\n\nfunction onLinksClick(links) {\n  for (let i = 0; i < links.length; i++) {\n    let link = links[i];\n    link.addEventListener('click', function (e) {\n      e.preventDefault();\n      window.open(this.href);\n    });\n  }\n}\n\nconst BASE_URL = 'https://books-backend.p.goit.global/books/';\n\nasync function getBookById(bookId) {\n  const URL = `${BASE_URL}${bookId}`;\n  const resp = await fetch(URL);\n  if (!resp.ok) {\n    throw new Error(resp.statusText);\n  }\n  return await resp.json();\n}\n"],"names":["parcelRequire","register","JSON","parse","$2tTzi","$ebcd9d8daecfc034$export$5c6c81f9c5a88dc","arr","map","obj","book_image","title","contributor","_id","join","$b3186d35b168cd5d$export$a1544dad697b423d","key","value","serializedState","stringify","localStorage","setItem","error","console","message","$b3186d35b168cd5d$export$11e63f7b0f3d9900","getItem","undefined","$b3186d35b168cd5d$export$2e2bcd8739ae039","removeItem","$63c842988642d6f1$var$categoryListEl","document","querySelector","$63c842988642d6f1$var$categoryConteiner","$63c842988642d6f1$export$8754fe332e345678","el","classList","remove","add","$63c842988642d6f1$export$eb2c8698cba8aabd","addEventListener","async","e","categoryRequest","target","textContent","categoryRequestTarget","$4f1c0259bbb55e68$export$ce3b903fddb06c5d","apiRequestCategory","then","data","MarkupCategory","innerHTML","catch","err","log","fetch","resp","ok","Error","statusText","json","insertAdjacentHTML","li","list_name","sort","$4f1c0259bbb55e68$var$mainHomeContainerEl","apiRequestTopBooks","MarkupTopBooks","booksMarkup","books","page","total_pages","paginationBtn","hidden","body","event","contains","category","getAttribute","$18d259bdb8a5c57c$exports","getBundleURL","resolve","$6f0165e792903077$exports","$d7a8a361be5a7d2a$exports","$44af8a00698e3543$var$bookQuikWiew","$44af8a00698e3543$var$modalElement","$44af8a00698e3543$var$modalInfo","$44af8a00698e3543$var$bookDescription","$44af8a00698e3543$var$backdrop","$44af8a00698e3543$var$closeModalBtn","$44af8a00698e3543$var$bookItem","$44af8a00698e3543$var$onCloseModal","toggle","removeEventListener","$44af8a00698e3543$var$handleBackdropClick","window","$44af8a00698e3543$var$onEscKeyPress","code","currentTarget","$44af8a00698e3543$var$getUserData","userDataString","evt","closest","bookId","book","URL","$44af8a00698e3543$var$BASE_URL","$44af8a00698e3543$var$getBookById","save","bookInStorage","Boolean","load","find","author","description","buy_links","markup","url","$parcel$interopDefault","removeBtn","NoLoginTxt","addABook","congratulationMsg","checkYouHaveBook","style","display","checkUserIn","$cRUDO","addbooktosl","setTimeout","removeBook","links","i","length","preventDefault","open","this","href","$44af8a00698e3543$var$onLinksClick","querySelectorAll","$44af8a00698e3543$var$renderBookById"],"version":3,"file":"index.03f4a2aa.js.map"}