{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-dd47e51083d77ee9.js","src/index.js","node_modules/@parcel/runtime-js/lib/runtime-5d1d3f7f2f9a5260.js","node_modules/@parcel/runtime-js/lib/runtime-a9387971e7ab79a5.js","node_modules/@parcel/runtime-js/lib/runtime-2279fdd1664f2895.js","src/js/storage-servises.js","src/js/create-modal.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"EVgbq\\\":\\\"index.a5e000ed.js\\\",\\\"9qBCW\\\":\\\"amazon_link.626c9508.png\\\",\\\"gTCLq\\\":\\\"apple_link.652b354e.png\\\",\\\"7wZd0\\\":\\\"bookshop_link.1d091ebd.png\\\",\\\"2pQrU\\\":\\\"index.83528d04.js\\\"}\"));","import './js/queries';\nimport './js/header-current-page';\nimport './js/menu';\nimport './js/home';\nimport './js/create-markup-home';\n// import './js/shopping-list';\n// import './js/create-markup-shopping';\nimport './js/btn';\nimport './js/funds';\nimport './js/support-ukraine';\nimport './js/scroll-up';\nimport './js/theme';\nimport './js/category-list';\nimport './js/login-modal';\nimport './js/swiper';\nimport './js/create-modal';\n","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"9qBCW\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"gTCLq\");","module.exports = require('./helpers/bundle-url').getBundleURL('EVgbq') + require('./helpers/bundle-manifest').resolve(\"7wZd0\");","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Remove state error: ', error.message);\n  }\n};\n\nexport default {\n    save,\n    load,\n    remove,\n};","import amazonImg from '../images/amazon_link.png';\nimport appleImg from '../images/apple_link.png';\nimport bookshopImg from '../images/bookshop_link.png';\nimport { addbooktosl } from './login-modal';\nimport storageServises from './storage-servises';\n\nconst bookQuikWiew = document.querySelector('.main');\nconst modalElement = document.querySelector('.modal_pop-up__container');\nconst modalInfo = document.querySelector('.modal_pop-up__description');\nconst bookDescription = document.querySelector('.no-description');\nconst backdrop = document.querySelector('.backdrop_pop-up');\nconst closeModalBtn = document.querySelector('.modal_pop-up__close-btn');\n\nbookQuikWiew.addEventListener('click', onOpenModal);\ncloseModalBtn.addEventListener('click', onCloseModal);\n\nlet bookItem;\n\nasync function onOpenModal(evt) {\n  if (!evt.target.closest('.top-books_quick-view')) return;\n  \n  const bookId = evt.target\n  .closest('.top-books_quick-view')\n  .getAttribute('data-bookId');\n  bookItem = bookId;\n  console.log(bookId);\n\n\n  backdrop.classList.remove('backdrop_pop-up--is-hidden');\n  backdrop.addEventListener('click', handleBackdropClick);\n  closeModalBtn.addEventListener('click', onCloseModal);\n  window.addEventListener('keydown', onEscKeyPress);\n\n  await renderBookById(bookId);\n\n  // await \n\n  // const addAAbook = document.querySelector('.modal__btn-add');\n  // addAAbook.addEventListener('click', addbooktosl(bookId));\n  \n}\n\nfunction onCloseModal() {\n  backdrop.classList.toggle('backdrop_pop-up--is-hidden');\n  backdrop.removeEventListener('click', handleBackdropClick);\n  closeModalBtn.removeEventListener('click', onCloseModal);\n  window.removeEventListener('keydown', onEscKeyPress);\n\n  modalInfo.innerHTML = '';\n}\n\nfunction onEscKeyPress(event) {\n  if (event.code === 'Escape') {\n    onCloseModal();\n  }\n}\n\nfunction handleBackdropClick(event) {\n  if (event.target === event.currentTarget) {\n    onCloseModal();\n  }\n}\n\nasync function renderBookById(bookId) {\n  modalElement.innerHTML = '';\n\n  try {\n    const book = await getBookById(bookId);\n\n    storageServises.save('active-book', book);\n\n    const bookInStorage = Boolean(storageServises.load('selected-books')?.find(el => el._id === book._id));\n\n    const { book_image, title, author, description, buy_links } = book;\n\n    if (description === '') {\n     bookDescription.innerHTML = 'We hope you will love it';\n    } else {\n    bookDescription.innerHTML = '';\n  }\n\n    const markup = `<div class=\"modal-info\">\n    <img class=\"book__img\" src=\"${book_image}\" alt=\"${title}\"/>\n    <div class=\"modal-info__box\">\n       <h2 class=\"book__title\">${title}</h2>\n       <h3 class=\"book__author\">${author}</h3>\n       <p class=\"book__description\">${description}</p>\n       <ul class=\"list seller__list\">\n         <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[0].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Amazon\">\n                <img src=\"${amazonImg}\" alt=\"amazon\" />\n              </a>\n            </li>\n            <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[1].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Apple-books\">\n                <img src=\"${appleImg}\" alt=\"apple-books\" />\n              </a>\n            </li>\n            <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[4].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Bookshop\">\n                <img src=\"${bookshopImg}\" alt=\"bookshop\" />\n              </a>\n            </li>\n       </ul>\n       </div>\n    </div>\n    <button class=\"btn modal__btn-add\" type=\"button\"\n    data-bookId='${bookId}'>${bookInStorage ? 'remove from the shopping list' : 'add to shopping list'}</button>`;\n\n    // <button class=\"btn modal__btn-remove\" type=\"button\">remove from the shopping list</button>\n    //   <p class=\"modal__btn-text\">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    \n    modalElement.innerHTML = markup;\n\n    const linksShops = document.querySelectorAll('.modal__link');\n    onLinksClick(linksShops);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction onLinksClick(links) {\n  for (let i = 0; i < links.length; i++) {\n    let link = links[i];\n    link.addEventListener('click', function (e) {\n      e.preventDefault();\n      window.open(this.href);\n    });\n  }\n}\n\n \nconst BASE_URL = 'https://books-backend.p.goit.global/books/';\n\nasync function getBookById(bookId) {\n  const URL = `${BASE_URL}${bookId}`;\n  const resp = await fetch(URL);\n  if (!resp.ok) {\n    throw new Error(resp.statusText);\n  }\n  return await resp.json();\n}\n"],"names":["parcelRequire","register","JSON","parse","$18d259bdb8a5c57c$exports","getBundleURL","resolve","$6f0165e792903077$exports","$d7a8a361be5a7d2a$exports","$b3186d35b168cd5d$export$2e2bcd8739ae039","key","value","serializedState","stringify","localStorage","setItem","error","console","message","getItem","undefined","removeItem","$44af8a00698e3543$var$bookQuikWiew","document","querySelector","$44af8a00698e3543$var$modalElement","$44af8a00698e3543$var$modalInfo","$44af8a00698e3543$var$bookDescription","$44af8a00698e3543$var$backdrop","$44af8a00698e3543$var$closeModalBtn","$44af8a00698e3543$var$bookItem","$44af8a00698e3543$var$onCloseModal","classList","toggle","removeEventListener","$44af8a00698e3543$var$handleBackdropClick","window","$44af8a00698e3543$var$onEscKeyPress","innerHTML","event","code","target","currentTarget","addEventListener","async","evt","closest","bookId","getAttribute","log","remove","book","URL","$44af8a00698e3543$var$BASE_URL","resp","fetch","ok","Error","statusText","json","$44af8a00698e3543$var$getBookById","save","bookInStorage","Boolean","load","find","el","_id","book_image","title","author","description","buy_links","markup","url","$parcel$interopDefault","links","i","length","e","preventDefault","open","this","href","$44af8a00698e3543$var$onLinksClick","querySelectorAll","$44af8a00698e3543$var$renderBookById"],"version":3,"file":"index.a5e000ed.js.map"}