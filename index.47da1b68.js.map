{"mappings":"qhBAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,6PCAzDH,EAAA,S,mGCAA,IAAAI,EAAAJ,EAAA,S,0BAIA,MAAMK,EAAiBC,SAASC,cAAc,kBACxCC,EAAoBF,SAASC,cAAc,yBAC3BD,SAASC,cAAc,iBAE7CF,EAAeI,iBAAiB,SAASC,MAAMC,IAC3C,MAAMC,EAAkBD,EAAEE,OAAOC,YAC7BH,EAAEE,OAAOC,cAAgBT,EAAeS,cAEpB,mBAApBF,GACA,EAAAG,EAAAC,sBAEA,EAAAC,EAAAC,oBAAmBN,GACdO,MAAKC,IAEF,MAAMC,GAAiB,EAAAjB,EAAAkB,sBAAqBF,GAC5CZ,EAAkBe,UAAY,+BAA+BZ,EAAEE,OAAOC,yDAAyDO,SAAsB,IAExJG,OAAMC,GAAOC,QAAQC,IAAIF,KAAA,IAa3BG,MADH,2DACyBT,MAAKU,IAC9B,IAAKA,EAAKC,GACN,MAAM,IAAIC,MAAMF,EAAKG,YAEzB,OAAOH,EAAKI,MAAI,IAZnBd,MAAKC,IACFf,EAAe6B,mBAAmB,YAAmCd,EA2BpEe,KACGC,GAAM,0EACsBA,EAAGC,yBAGlCC,OACAC,KAAK,IAjC+D,IAExEf,OAAMC,GAAOC,QAAQC,IAAIF,K,+BC7B9Be,EAAiB,IAAAC,IAAoBzC,EAAA,SAAA0C,QAA6C,qBAAAC,KAAUC,W,SCA5FC,EAAiB,IAAAJ,IAAoBzC,EAAA,SAAA0C,QAA6C,qBAAAC,KAAUC,W,SCA5FE,EAAiB,IAAAL,IAAoBzC,EAAA,SAAA0C,QAA6C,qBAAAC,KAAUC,W,IC0B5FG,EAAe,C,KA1BF,CAACC,EAAKC,KACjB,IACE,MAAMC,EAAkBhD,KAAKiD,UAAUF,GACvCG,aAAaC,QAAQL,EAAKE,EAC5B,CAAE,MAAOI,GACP5B,QAAQ4B,MAAM,oBAAqBA,EAAMC,QAC3C,G,KAGWP,IACX,IACE,MAAME,EAAkBE,aAAaI,QAAQR,GAC7C,OAA2B,OAApBE,OAA2BO,EAAYvD,KAAKC,MAAM+C,EAC3D,CAAE,MAAOI,GACP5B,QAAQ4B,MAAM,oBAAqBA,EAAMC,QAC3C,G,OAGaP,IACb,IACEI,aAAaM,WAAWV,EAC1B,CAAE,MAAOM,GACP5B,QAAQ4B,MAAM,uBAAwBA,EAAMC,QAC9C,I,wECKF,MAAMI,EAAerD,SAASC,cAAc,SACtCqD,EAAetD,SAASC,cAAc,4BACtCsD,EAAYvD,SAASC,cAAc,8BACnCuD,EAAkBxD,SAASC,cAAc,mBACzCwD,EAAWzD,SAASC,cAAc,oBAClCyD,EAAgB1D,SAASC,cAAc,4BAO7C,IAAI0D,EAkCJ,SAASC,IACPH,EAASI,UAAUC,OAAO,8BAC1BL,EAASM,oBAAoB,QAASC,GACtCN,EAAcK,oBAAoB,QAASH,GAC3CK,OAAOF,oBAAoB,UAAWG,GAEtCX,EAAUtC,UAAY,EACxB,CAEA,SAASiD,EAAcC,GACF,WAAfA,EAAMC,MACRR,GAEJ,CAEA,SAASI,EAAoBG,GACvBA,EAAM5D,SAAW4D,EAAME,eACzBT,GAEJ,CA8IA,SAASU,IACP,MAAMC,EAAiBzB,aAAaI,QAAQ,YAC5C,GAAIqB,EAAgB,CAElB,OADiB3E,KAAKC,MAAM0E,EAE9B,CACE,OAAO,IAEX,CA9MAlB,EAAalD,iBAAiB,SAK9BC,eAA2BoE,GACzB,IAAKA,EAAIjE,OAAOkE,QAAQ,yBAA0B,OAElD,MAAMC,EAASF,EAAIjE,OAClBkE,QAAQ,yBACRE,aAAa,eACdhB,EAAWe,EACXtD,QAAQC,IAAIqD,GAGZjB,EAASI,UAAUe,OAAO,8BAC1BnB,EAAStD,iBAAiB,QAAS6D,GACnCN,EAAcvD,iBAAiB,QAASyD,GACxCK,OAAO9D,iBAAiB,UAAW+D,SAuDrC9D,eAA8BsE,GAC5BpB,EAAarC,UAAY,GAEzB,IACE,MAAM4D,QAiJVzE,eAA2BsE,GACzB,MAAMvC,EAAM,GAAG2C,IAAWJ,IACpBnD,QAAaD,MAAMa,GACzB,IAAKZ,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAEvB,aAAaH,EAAKI,MACpB,CAxJuBoD,CAAYL,GAE/BjC,EAAgBuC,KAAK,cAAeH,GAEpC,MAAMI,EAAgBC,QAAQzC,EAAgB0C,KAAK,mBAAmBC,MAAKC,GAAMA,EAAGC,MAAQT,EAAKS,QAE3FC,WAAEA,EAAUC,MAAEA,EAAKC,OAAEA,EAAMC,YAAEA,EAAWC,UAAEA,GAAcd,EAG7DrB,EAAgBvC,UADG,KAAhByE,EACyB,2BAED,GAG5B,MAAME,EAAS,6DACeL,WAAoBC,2EAErBA,2CACCC,+CACIC,4GAItBC,EAAU,GAAGtD,2HAEDwD,EAAA3D,6HAKZyD,EAAU,GAAGtD,gIAEDwD,EAAAtD,kIAKZoD,EAAU,GAAGtD,6HAEDwD,EAAArD,iLAOTkC,MAAWO,EAAgB,gCAAkC,2FACvBP,4RAOrDpB,EAAarC,UAAY2E,EAEzB,MAAME,EAAY9F,SAASC,cAAc,sBACnC8F,EAAa/F,SAASC,cAAc,0BACpC+F,EAAWhG,SAASC,cAAc,mBAClCgG,EAAoBjG,SAASC,cAAc,oBA2BjD,SAAUiG,EAAiBxB,GACFJ,IACR6B,MAAMtE,KAAKgD,IACrBA,IAASH,IACVoB,EAAUM,MAAMC,QAAU,QAC1BL,EAASI,MAAMC,QAAU,OACzBJ,EAAkBG,MAAMC,QAAU,OACpC,GAEJ,CAIA,SAASC,IACgBhC,MAErByB,EAAWK,MAAMC,QAAU,QAC3BP,EAAUM,MAAMC,QAAU,OACxBL,EAASI,MAAMC,QAAU,OAE/B,CA7CAL,EAAS7F,iBAAiB,SAAUgE,IAClC,MAAMO,EAASP,EAAM5D,OAAOoE,aAAa,gBAEzC,EAAA4B,EAAAC,aAAY9B,GACZoB,EAAUM,MAAMC,QAAU,QAC1BL,EAASI,MAAMC,QAAU,OACzBJ,EAAkBG,MAAMC,QAAU,QAClCI,YAAW,KACTR,EAAkBG,MAAMC,QAAU,SAChC,SAKNP,EAAU3F,iBAAiB,SAAUgE,IACnC,MAAMO,EAASP,EAAM5D,OAAOoE,aAAa,gBAEvC,EAAA4B,EAAAG,YAAWhC,GACXoB,EAAUM,MAAMC,QAAU,OAC1BL,EAASI,MAAMC,QAAU,QACzBJ,EAAkBG,MAAMC,QAAU,UA4BtCC,IACJJ,EAAiBxB,IAsBjB,SAAsBiC,GACpB,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAC1BD,EAAMC,GACZzG,iBAAiB,SAAS,SAAUE,GACvCA,EAAEyG,iBACF7C,OAAO8C,KAAKC,KAAKC,KACnB,GACF,CACF,CAzBIC,CADmBlH,SAASmH,iBAAiB,gBAE/C,CAAE,MAAOnE,GACP5B,QAAQC,IAAI2B,EACd,CACF,CAhLQoE,CAAe1C,EAevB,IAlCAhB,EAAcvD,iBAAiB,QAASyD,GA8MxCxC,QAAQC,IAAIiD,KAaZ,MAAMQ,EAAW","sources":["node_modules/@parcel/runtime-js/lib/runtime-e10a5c91964ef707.js","src/index.js","src/js/category-list.js","node_modules/@parcel/runtime-js/lib/runtime-04746df128b3d21d.js","node_modules/@parcel/runtime-js/lib/runtime-426c4d5fb9c7101f.js","node_modules/@parcel/runtime-js/lib/runtime-4836a641395b77e3.js","src/js/storage-servises.js","src/js/create-modal.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.47da1b68.js\\\",\\\"3bIHe\\\":\\\"amazon_link.626c9508.png\\\",\\\"dkcwB\\\":\\\"apple_link.652b354e.png\\\",\\\"2D6jo\\\":\\\"bookshop_link.1d091ebd.png\\\",\\\"hqwGB\\\":\\\"index.779e6277.js\\\"}\"));","import './js/queries';\nimport './js/header-current-page';\nimport './js/menu';\nimport './js/home';\nimport './js/create-markup-home';\n// import './js/shopping-list';\n// import './js/create-markup-shopping';\nimport './js/btn';\nimport './js/funds';\nimport './js/support-ukraine';\nimport './js/scroll-up';\nimport './js/theme';\nimport './js/category-list';\nimport './js/login-modal';\nimport './js/swiper';\nimport './js/create-modal';\n","import { createMarkupCategory } from './create-markup-category-books';\nimport { apiRequestCategory } from './queries';\nimport { allCategoryCreate } from './home';\n\nconst categoryListEl = document.querySelector('.category-list');\nconst categoryConteiner = document.querySelector('.js-section-top-books');\nconst allCategoryEl = document.querySelector('.all-category');\n\ncategoryListEl.addEventListener('click', async e => {\n    const categoryRequest = e.target.textContent;\n    if (e.target.textContent === categoryListEl.textContent) { return };\n\n    if (categoryRequest === 'All categories') {\n        allCategoryCreate();\n    } else {\n        apiRequestCategory(categoryRequest)\n            .then(data => {\n                // console.log(data);\n                const MarkupCategory = createMarkupCategory(data);\n                categoryConteiner.innerHTML = `<h1 class=\"title-top-books\">${e.target.textContent}</h1><div class=\"category-books_container\">${MarkupCategory}</div>`;\n            })\n            .catch(err => console.log(err));\n    }\n});\n\napiRequestCategoriesList()\n    .then(data => {\n        categoryListEl.insertAdjacentHTML('beforeend', createMarkupCategList(data));\n    })\n    .catch(err => console.log(err));\n\nfunction apiRequestCategoriesList() {\n    const CATEGORIES_URL =\n        'https://books-backend.p.goit.global/books/category-list';\n    return fetch(CATEGORIES_URL).then(resp => {\n        if (!resp.ok) {\n            throw new Error(resp.statusText);\n        }\n        return resp.json();\n    });\n}\n\nfunction apiRequestByCategory(category) {\n    const CATEGORY_URL = `https://books-backend.p.goit.global/books/category?category=${category}`;\n    return fetch(CATEGORY_URL).then(resp => {\n        if (!resp.ok) {\n            throw new Error(resp.statusText);\n        }\n        return resp.json();\n    });\n}\n\nfunction createMarkupCategList(arr) {\n    return arr\n        .map(\n            li => `<li class=\"category-list_item\">\n        <p class=\"category-list_name\">${li.list_name}</p>\n</li>`\n        )\n        .sort()\n        .join('');\n}\n\n// export { createMarkupCategList };\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"3bIHe\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dkcwB\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"2D6jo\")).toString();","const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error(\"Set state error: \", error.message);\n  }\n};\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error(\"Get state error: \", error.message);\n  }\n};\n\nconst remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    console.error('Remove state error: ', error.message);\n  }\n};\n\nexport default {\n    save,\n    load,\n    remove,\n};","import amazonImg from '../images/amazon_link.png';\nimport appleImg from '../images/apple_link.png';\nimport bookshopImg from '../images/bookshop_link.png';\nimport storageServises from './storage-servises';\n\n// export {onCloseModal}\n\nimport { initializeApp } from 'firebase/app';\n\nimport 'firebase/auth';\n\nimport { getAuth, onAuthStateChanged, signOut, createUserWithEmailAndPassword } from 'firebase/auth';\n\nimport {\n  getDatabase,\n  ref,\n  set,\n  child,\n  update,\n  remove,\n  get,\n  onValue\n} from 'firebase/database';\n\nimport { addbooktosl, removeBook } from './login-modal';\nimport { async } from '@firebase/util';\n\n\nconst bookQuikWiew = document.querySelector('.main');\nconst modalElement = document.querySelector('.modal_pop-up__container');\nconst modalInfo = document.querySelector('.modal_pop-up__description');\nconst bookDescription = document.querySelector('.no-description');\nconst backdrop = document.querySelector('.backdrop_pop-up');\nconst closeModalBtn = document.querySelector('.modal_pop-up__close-btn');\n\n// const SHOP_LIST_KEY = 'selected-books';\n\nbookQuikWiew.addEventListener('click', onOpenModal);\ncloseModalBtn.addEventListener('click', onCloseModal);\n\nlet bookItem;\n\nasync function onOpenModal(evt) {\n  if (!evt.target.closest('.top-books_quick-view')) return;\n  \n  const bookId = evt.target\n  .closest('.top-books_quick-view')\n  .getAttribute('data-bookId');\n  bookItem = bookId;\n  console.log(bookId);\n\n\n  backdrop.classList.remove('backdrop_pop-up--is-hidden');\n  backdrop.addEventListener('click', handleBackdropClick);\n  closeModalBtn.addEventListener('click', onCloseModal);\n  window.addEventListener('keydown', onEscKeyPress);\n\n  await renderBookById(bookId);\n\n\n  // const buttonModalRemoveBook = document.querySelector('.modal__btn-remove');\n  // buttonModalRemoveBook.addEventListener('click', removeee)\n  \n  // function removeee() {\n  //     console.log('cliiiiick')\n  // }\n\n  // await \n\n  // const addAAbook = document.querySelector('.modal__btn-add');\n  // addAAbook.addEventListener('click', addbooktosl(bookId));\n  \n}\n\nfunction onCloseModal() {\n  backdrop.classList.toggle('backdrop_pop-up--is-hidden');\n  backdrop.removeEventListener('click', handleBackdropClick);\n  closeModalBtn.removeEventListener('click', onCloseModal);\n  window.removeEventListener('keydown', onEscKeyPress);\n\n  modalInfo.innerHTML = '';\n}\n\nfunction onEscKeyPress(event) {\n  if (event.code === 'Escape') {\n    onCloseModal();\n  }\n}\n\nfunction handleBackdropClick(event) {\n  if (event.target === event.currentTarget) {\n    onCloseModal();\n  }\n}\n\n// function checkUserIn() {\n//   onAuthStateChanged(auth, user => {\n//     if (user) {\n//       // checkname();\n//       // checkId();\n//       // getAddedBooks();\n      \n\n//       // ...\n//     } else {\n//       NoLoginTxt.style.display = 'block';\n//     }\n//   });\n// }\n\nasync function renderBookById(bookId) {\n  modalElement.innerHTML = '';\n\n  try {\n    const book = await getBookById(bookId);\n\n    storageServises.save('active-book', book);\n\n    const bookInStorage = Boolean(storageServises.load('selected-books')?.find(el => el._id === book._id));\n\n    const { book_image, title, author, description, buy_links } = book;\n\n    if (description === '') {\n     bookDescription.innerHTML = 'We hope you will love it';\n    } else {\n    bookDescription.innerHTML = '';\n  }\n\n    const markup = `<div class=\"modal-info\">\n    <img class=\"book__img\" src=\"${book_image}\" alt=\"${title}\"/>\n    <div class=\"modal-info__box\">\n       <h2 class=\"book__title\">${title}</h2>\n       <h3 class=\"book__author\">${author}</h3>\n       <p class=\"book__description\">${description}</p>\n       <ul class=\"list seller__list\">\n         <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[0].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Amazon\">\n                <img src=\"${amazonImg}\" alt=\"amazon\" />\n              </a>\n            </li>\n            <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[1].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Apple-books\">\n                <img src=\"${appleImg}\" alt=\"apple-books\" />\n              </a>\n            </li>\n            <li>\n              <a class=\"seller__link\" href=\"${\n                buy_links[4].url\n              }\" target=\"_blank\" crossorigin=\"anonymous\"  rel=\"noopener noreferrer\" aria-label=\"Bookshop\">\n                <img src=\"${bookshopImg}\" alt=\"bookshop\" />\n              </a>\n            </li>\n       </ul>\n       </div>\n    </div>\n    <button class=\"btn modal__btn-add\" type=\"button\"\n    data-bookId='${bookId}'>${bookInStorage ? 'remove from the shopping list' : 'add to shopping list'}</button>\n    <button class=\"btn modal__btn-remove\" data-bookId='${bookId}' type=\"button\">remove from the shopping list</button>\n    <p class=\"modal__btn-text\">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    <p class=\"modal__btn-need-login\">First you need to login</p>`;\n\n    // <button class=\"btn modal__btn-remove\" type=\"button\">remove from the shopping list</button>\n    //   <p class=\"modal__btn-text\">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    \n    modalElement.innerHTML = markup;\n\n    const removeBtn = document.querySelector('.modal__btn-remove')\n    const NoLoginTxt = document.querySelector('.modal__btn-need-login');\n    const addABook = document.querySelector('.modal__btn-add');\n    const congratulationMsg = document.querySelector('.modal__btn-text')\n\n    addABook.addEventListener('click', (event) =>{\n      const bookId = event.target.getAttribute('data-bookId');\n     \n      addbooktosl(bookId);\n      removeBtn.style.display = 'block';\n      addABook.style.display = 'none';\n      congratulationMsg.style.display = 'block';\n      setTimeout(() =>{\n        congratulationMsg.style.display = 'none';\n       }, 6500)\n        \n      \n    })\n\n    removeBtn.addEventListener('click', (event) =>{\n      const bookId = event.target.getAttribute('data-bookId');\n      // checkYouHaveBook(bookId);\n        removeBook(bookId);\n        removeBtn.style.display = 'none';\n        addABook.style.display = 'block';\n        congratulationMsg.style.display = 'none';\n       \n    \n    })\n\n    function  checkYouHaveBook(bookId){\n      const userDataString = getUserData();\n      userDataString.books.map((book) => {\n        if(book === bookId){\n          removeBtn.style.display = 'block';\n          addABook.style.display = 'none';\n          congratulationMsg.style.display = 'none';\n        } \n      })\n    }\n\n    \n\n    function checkUserIn(){\n      const userDataString = getUserData();\n      if (!userDataString) {\n        NoLoginTxt.style.display = 'block';\n        removeBtn.style.display = 'none';\n          addABook.style.display = 'none';\n      }\n    }\n\n\n    checkUserIn();\ncheckYouHaveBook(bookId);\n\n    \n\n    const linksShops = document.querySelectorAll('.modal__link');\n    onLinksClick(linksShops);\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction getUserData() {\n  const userDataString = localStorage.getItem('userdata');\n  if (userDataString) {\n    const userData = JSON.parse(userDataString);\n    return userData;\n  } else {\n    return null;\n  }\n}\nconsole.log(getUserData())\n\nfunction onLinksClick(links) {\n  for (let i = 0; i < links.length; i++) {\n    let link = links[i];\n    link.addEventListener('click', function (e) {\n      e.preventDefault();\n      window.open(this.href);\n    });\n  }\n}\n\n \nconst BASE_URL = 'https://books-backend.p.goit.global/books/';\n\nasync function getBookById(bookId) {\n  const URL = `${BASE_URL}${bookId}`;\n  const resp = await fetch(URL);\n  if (!resp.ok) {\n    throw new Error(resp.statusText);\n  }\n  return await resp.json();\n}\n"],"names":["parcelRequire","register","JSON","parse","$lMq6R","$8f83142a7678b8c4$var$categoryListEl","document","querySelector","$8f83142a7678b8c4$var$categoryConteiner","addEventListener","async","e","categoryRequest","target","textContent","$awoeA","allCategoryCreate","$j2XVn","apiRequestCategory","then","data","MarkupCategory","createMarkupCategory","innerHTML","catch","err","console","log","fetch","resp","ok","Error","statusText","json","insertAdjacentHTML","map","li","list_name","sort","join","$90334eaed38668a9$exports","URL","resolve","url","toString","$c7fab019eef52cc4$exports","$412313614dee0bc4$exports","$1bc94850faccf779$export$2e2bcd8739ae039","key","value","serializedState","stringify","localStorage","setItem","error","message","getItem","undefined","removeItem","$533d9e23a3a7af46$var$bookQuikWiew","$533d9e23a3a7af46$var$modalElement","$533d9e23a3a7af46$var$modalInfo","$533d9e23a3a7af46$var$bookDescription","$533d9e23a3a7af46$var$backdrop","$533d9e23a3a7af46$var$closeModalBtn","$533d9e23a3a7af46$var$bookItem","$533d9e23a3a7af46$var$onCloseModal","classList","toggle","removeEventListener","$533d9e23a3a7af46$var$handleBackdropClick","window","$533d9e23a3a7af46$var$onEscKeyPress","event","code","currentTarget","$533d9e23a3a7af46$var$getUserData","userDataString","evt","closest","bookId","getAttribute","remove","book","$533d9e23a3a7af46$var$BASE_URL","$533d9e23a3a7af46$var$getBookById","save","bookInStorage","Boolean","load","find","el","_id","book_image","title","author","description","buy_links","markup","$parcel$interopDefault","removeBtn","NoLoginTxt","addABook","congratulationMsg","checkYouHaveBook","books","style","display","checkUserIn","$gY4QW","addbooktosl","setTimeout","removeBook","links","i","length","preventDefault","open","this","href","$533d9e23a3a7af46$var$onLinksClick","querySelectorAll","$533d9e23a3a7af46$var$renderBookById"],"version":3,"file":"index.47da1b68.js.map"}