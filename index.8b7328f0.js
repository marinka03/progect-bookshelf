!function(){function e(e){return e&&e.__esModule?e.default:e}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},t={},l=o.parcelRequired7c6;null==l&&((l=function(e){if(e in n)return n[e].exports;if(e in t){var o=t[e];delete t[e];var l={id:e,exports:{}};return n[e]=l,o.call(l.exports,l,l.exports),l.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,o){t[e]=o},o.parcelRequired7c6=l),l("iE7OH").register(JSON.parse('{"EVgbq":"index.8b7328f0.js","9qBCW":"amazon_link.626c9508.png","gTCLq":"apple_link.652b354e.png","7wZd0":"bookshop_link.1d091ebd.png","iJSwa":"index.12b0bda8.js"}')),l("2tTzi"),l("iYDPN"),l("bNmPK"),l("6N62V"),l("1uU1u"),l("6FlSt"),l("d6S5l"),l("18VO4"),l("23Ajj"),l("9VC5X"),l("8z8B0"),l("cRUDO"),l("RX4Re");var a={};a=l("aNJCr").getBundleURL("EVgbq")+l("iE7OH").resolve("9qBCW");var i={};i=l("aNJCr").getBundleURL("EVgbq")+l("iE7OH").resolve("gTCLq");var r={};r=l("aNJCr").getBundleURL("EVgbq")+l("iE7OH").resolve("7wZd0");var s=l("fnjSL");l("fkNhc"),l("gQOBw"),l("gQOBw"),l("cokon");var d=l("cRUDO");l("2xDiJ");const c=document.querySelector(".main"),u=document.querySelector(".modal_pop-up__container"),p=document.querySelector(".modal_pop-up__description"),b=document.querySelector(".no-description"),_=document.querySelector(".backdrop_pop-up"),k=document.querySelector(".modal_pop-up__close-btn");let g;function f(){_.classList.toggle("backdrop_pop-up--is-hidden"),_.removeEventListener("click",y),k.removeEventListener("click",f),window.removeEventListener("keydown",m),p.innerHTML=""}function m(e){"Escape"===e.code&&f()}function y(e){e.target===e.currentTarget&&f()}function v(){const e=localStorage.getItem("userdata");if(e){return JSON.parse(e)}return null}c.addEventListener("click",(async function(o){if(!o.target.closest(".top-books_quick-view"))return;const n=o.target.closest(".top-books_quick-view").getAttribute("data-bookId");g=n,console.log(n),_.classList.remove("backdrop_pop-up--is-hidden"),_.addEventListener("click",y),k.addEventListener("click",f),window.addEventListener("keydown",m),await async function(o){u.innerHTML="";try{const l=await async function(e){const o=`${h}${e}`,n=await fetch(o);if(!n.ok)throw new Error(n.statusText);return await n.json()}(o);s.default.save("active-book",l);const c=Boolean(s.default.load("selected-books")?.find((e=>e._id===l._id))),{book_image:p,title:_,author:k,description:g,buy_links:f}=l;b.innerHTML=""===g?"We hope you will love it":"";const m=`<div class="modal-info">\n    <img class="book__img" src="${p}" alt="${_}"/>\n    <div class="modal-info__box">\n       <h2 class="book__title">${_}</h2>\n       <h3 class="book__author">${k}</h3>\n       <p class="book__description">${g}</p>\n       <ul class="list seller__list">\n         <li>\n              <a class="seller__link" href="${f[0].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Amazon">\n                <img src="${e(a)}" alt="amazon" />\n              </a>\n            </li>\n            <li>\n              <a class="seller__link" href="${f[1].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Apple-books">\n                <img src="${e(i)}" alt="apple-books" />\n              </a>\n            </li>\n            <li>\n              <a class="seller__link" href="${f[4].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Bookshop">\n                <img src="${e(r)}" alt="bookshop" />\n              </a>\n            </li>\n       </ul>\n       </div>\n    </div>\n    <button class="btn modal__btn-add" type="button"\n    data-bookId='${o}'>${c?"remove from the shopping list":"add to shopping list"}</button>\n    <button class="btn modal__btn-remove" data-bookId='${o}' type="button">remove from the shopping list</button>\n    <p class="modal__btn-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    <p class="modal__btn-need-login">First you need to login</p>`;u.innerHTML=m;const y=document.querySelector(".modal__btn-remove"),w=document.querySelector(".modal__btn-need-login"),E=document.querySelector(".modal__btn-add"),L=document.querySelector(".modal__btn-text");function n(e){v().books.map((o=>{o===e&&(y.style.display="block",E.style.display="none",L.style.display="none")}))}function t(){v()||(w.style.display="block",y.style.display="none",E.style.display="none")}E.addEventListener("click",(e=>{const o=e.target.getAttribute("data-bookId");(0,d.addbooktosl)(o),y.style.display="block",E.style.display="none",L.style.display="block",setTimeout((()=>{L.style.display="none"}),6500)})),y.addEventListener("click",(e=>{const o=e.target.getAttribute("data-bookId");(0,d.removeBook)(o),y.style.display="none",E.style.display="block",L.style.display="none"})),t(),n(o);!function(e){for(let o=0;o<e.length;o++){e[o].addEventListener("click",(function(e){e.preventDefault(),window.open(this.href)}))}}(document.querySelectorAll(".modal__link"))}catch(q){console.log(q)}}(n)})),k.addEventListener("click",f),console.log(v());const h="https://books-backend.p.goit.global/books/"}();
//# sourceMappingURL=index.8b7328f0.js.map
