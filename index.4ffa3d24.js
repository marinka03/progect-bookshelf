!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},n={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in o)return o[e].exports;if(e in n){var t=n[e];delete n[e];var r={id:e,exports:{}};return o[e]=r,t.call(r.exports,r,r.exports),r.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},t.parcelRequired7c6=r),r("iE7OH").register(JSON.parse('{"EVgbq":"index.4ffa3d24.js","9qBCW":"amazon_link.626c9508.png","gTCLq":"apple_link.652b354e.png","7wZd0":"bookshop_link.1d091ebd.png","i8gtI":"index.1635e3b3.js"}')),r("2tTzi"),r("iYDPN"),r("bNmPK"),r("6N62V"),r("1uU1u"),r("6FlSt"),r("d6S5l"),r("18VO4"),r("23Ajj"),r("9VC5X");var l=r("kfaQ1"),a=r("2tTzi"),s=r("6N62V");const i=document.querySelector(".category-list"),c=document.querySelector(".js-section-top-books");document.querySelector(".all-category");i.addEventListener("click",(async e=>{const t=e.target.textContent;e.target.textContent!==i.textContent&&("All categories"===t?(0,s.allCategoryCreate)():(0,a.apiRequestCategory)(t).then((t=>{const o=(0,l.createMarkupCategory)(t);c.innerHTML=`<h1 class="title-top-books">${e.target.textContent}</h1><div class="category-books_container">${o}</div>`})).catch((e=>console.log(e))))})),fetch("https://books-backend.p.goit.global/books/category-list").then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()})).then((e=>{i.insertAdjacentHTML("beforeend",e.map((e=>`<li class="category-list_item">\n        <p class="category-list_name">${e.list_name}</p>\n</li>`)).sort().join(""))})).catch((e=>console.log(e))),r("cRUDO"),r("RX4Re");var d={};d=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("9qBCW");var u={};u=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("gTCLq");var p={};p=r("aNJCr").getBundleURL("EVgbq")+r("iE7OH").resolve("7wZd0");var b={save:(e,t)=>{try{const o=JSON.stringify(t);localStorage.setItem(e,o)}catch(e){console.error("Set state error: ",e.message)}},load:e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}},remove:e=>{try{localStorage.removeItem(e)}catch(e){console.error("Remove state error: ",e.message)}}};r("fkNhc"),r("gQOBw"),r("gQOBw"),r("cokon");var g=r("cRUDO");r("2xDiJ");const _=document.querySelector(".main"),m=document.querySelector(".modal_pop-up__container"),y=document.querySelector(".modal_pop-up__description"),k=document.querySelector(".no-description"),f=document.querySelector(".backdrop_pop-up"),v=document.querySelector(".modal_pop-up__close-btn");let h;function E(){f.classList.toggle("backdrop_pop-up--is-hidden"),f.removeEventListener("click",w),v.removeEventListener("click",E),window.removeEventListener("keydown",S),y.innerHTML=""}function S(e){"Escape"===e.code&&E()}function w(e){e.target===e.currentTarget&&E()}function q(){const e=localStorage.getItem("userdata");if(e){return JSON.parse(e)}return null}_.addEventListener("click",(async function(t){if(!t.target.closest(".top-books_quick-view"))return;const o=t.target.closest(".top-books_quick-view").getAttribute("data-bookId");h=o,console.log(o),f.classList.remove("backdrop_pop-up--is-hidden"),f.addEventListener("click",w),v.addEventListener("click",E),window.addEventListener("keydown",S),await async function(t){m.innerHTML="";try{const r=await async function(e){const t=`${L}${e}`,o=await fetch(t);if(!o.ok)throw new Error(o.statusText);return await o.json()}(t);b.save("active-book",r);const l=Boolean(b.load("selected-books")?.find((e=>e._id===r._id))),{book_image:a,title:s,author:i,description:c,buy_links:_}=r;k.innerHTML=""===c?"We hope you will love it":"";const y=`<div class="modal-info">\n    <img class="book__img" src="${a}" alt="${s}"/>\n    <div class="modal-info__box">\n       <h2 class="book__title">${s}</h2>\n       <h3 class="book__author">${i}</h3>\n       <p class="book__description">${c}</p>\n       <ul class="list seller__list">\n         <li>\n              <a class="seller__link" href="${_[0].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Amazon">\n                <img src="${e(d)}" alt="amazon" />\n              </a>\n            </li>\n            <li>\n              <a class="seller__link" href="${_[1].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Apple-books">\n                <img src="${e(u)}" alt="apple-books" />\n              </a>\n            </li>\n            <li>\n              <a class="seller__link" href="${_[4].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Bookshop">\n                <img src="${e(p)}" alt="bookshop" />\n              </a>\n            </li>\n       </ul>\n       </div>\n    </div>\n    <button class="btn modal__btn-add" type="button"\n    data-bookId='${t}'>${l?"remove from the shopping list":"add to shopping list"}</button>\n    <button class="btn modal__btn-remove" data-bookId='${t}' type="button">remove from the shopping list</button>\n    <p class="modal__btn-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    <p class="modal__btn-need-login">First you need to login</p>`;m.innerHTML=y;const f=document.querySelector(".modal__btn-remove"),v=document.querySelector(".modal__btn-need-login"),h=document.querySelector(".modal__btn-add"),E=document.querySelector(".modal__btn-text");function o(e){q().books.map((t=>{t===e&&(f.style.display="block",h.style.display="none",E.style.display="none")}))}function n(){q()||(v.style.display="block",f.style.display="none",h.style.display="none")}h.addEventListener("click",(e=>{const t=e.target.getAttribute("data-bookId");(0,g.addbooktosl)(t),f.style.display="block",h.style.display="none",E.style.display="block",setTimeout((()=>{E.style.display="none"}),6500)})),f.addEventListener("click",(e=>{const t=e.target.getAttribute("data-bookId");(0,g.removeBook)(t),f.style.display="none",h.style.display="block",E.style.display="none"})),n(),o(t);!function(e){for(let t=0;t<e.length;t++){e[t].addEventListener("click",(function(e){e.preventDefault(),window.open(this.href)}))}}(document.querySelectorAll(".modal__link"))}catch(S){console.log(S)}}(o)})),v.addEventListener("click",E),console.log(q());const L="https://books-backend.p.goit.global/books/"}();
//# sourceMappingURL=index.4ffa3d24.js.map
