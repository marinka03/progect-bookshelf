!function(){function o(o){return o&&o.__esModule?o.default:o}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},s=t.parcelRequired7c6;null==s&&((s=function(o){if(o in e)return e[o].exports;if(o in n){var t=n[o];delete n[o];var s={id:o,exports:{}};return e[o]=s,t.call(s.exports,s,s.exports),s.exports}var a=new Error("Cannot find module '"+o+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(o,t){n[o]=t},t.parcelRequired7c6=s),s("iE7OH").register(JSON.parse('{"EVgbq":"index.cd0c2ca8.js","9qBCW":"amazon_link.626c9508.png","gTCLq":"apple_link.652b354e.png","7wZd0":"bookshop_link.1d091ebd.png","eJWEp":"index.5142541e.js"}')),s("2tTzi"),s("iYDPN"),s("bNmPK");var a=s("2tTzi");s("2tTzi");function l(o){return o.map((o=>`<div class="top-books_book">\n            <img class="top-books_image" src="${o.book_image}" alt="book_image"  width="180"></img>\n            <h3 class="top-books_title">${o.title}</h3>\n            <p class="top-books_author">${o.contributor}</p>\n            <button class='top-books_quick-view ' data-bookId='${o._id}' type="button">quick view</button>\n        </div>`)).join("")}const i=(o,t)=>{try{const e=JSON.stringify(t);localStorage.setItem(o,e)}catch(o){console.error("Set state error: ",o.message)}},r=o=>{try{const t=localStorage.getItem(o);return null===t?void 0:JSON.parse(t)}catch(o){console.error("Get state error: ",o.message)}};var c={save:i,load:r,remove:o=>{try{localStorage.removeItem(o)}catch(o){console.error("Remove state error: ",o.message)}}};a=s("2tTzi");const d=document.querySelector(".category-list"),p=document.querySelector(".js-section-top-books");document.querySelector(".all-category");function u(o){r("activeCategory");document.querySelector(".active-category").classList.remove("active-category"),o.classList.add("active-category")}function b(o){i("activeCategory",o)}d.addEventListener("click",(async o=>{const t=o.target.textContent,e=o.target;o.target.textContent!==d.textContent&&("All categories"===t?(k(),b(o.target.textContent),u(e)):(0,a.apiRequestCategory)(t).then((t=>{const n=l(t);p.innerHTML=`<h1 class="title-top-books">${o.target.textContent}</h1><div class="category-books_container">${n}</div>`,b(o.target.textContent),u(e)})).catch((o=>console.log(o))))})),fetch("https://books-backend.p.goit.global/books/category-list").then((o=>{if(!o.ok)throw new Error(o.statusText);return o.json()})).then((o=>{d.insertAdjacentHTML("beforeend",o.map((o=>`<li class="category-list_item">\n        <p class="category-list_name">${o.list_name}</p>\n</li>`)).sort().join(""))})).catch((o=>console.log(o)));const g=document.querySelector(".js-section-top-books");function k(){(0,a.apiRequestTopBooks)().then((o=>{const t=`<h1 class="title-top-books">Best Sellers <span>Books</span></h1><div class="js-top-books-container">${o.map((o=>{const t=o.books.map((o=>`<li class="top-books_list list">\n    <div class="top-books_book">\n        <img class="top-books_image" src="${o.book_image}" alt="book_image"  width="180">\n        <h3 class="top-books_title">${o.title}</h3>\n        <p class="top-books_author">${o.contributor}</p>\n        <button class='top-books_quick-view ' data-bookId='${o._id}' type="button">quick view</button></div>\n  \n</li>`)).join("");return`\n      <ul class="top-books">\n      <p class="top-books_category">${o.list_name}</p>\n      <div class="top-books_container">${t}</div>\n      <div class="js-top-books_button top-books_button link" data-category='${o.list_name}'>see more</div>\n      </ul>`})).join("")}</div>`;g.innerHTML=t,o.page!==o.total_pages&&(paginationBtn.hidden=!1),b("All categories")})).catch((o=>console.log(o)))}k(),document.body.addEventListener("click",(function(o){if(o.target.classList.contains("js-top-books_button")){const t=o.target.getAttribute("data-category");(0,a.apiRequestCategory)(t).then((o=>{console.log("data :>> ",o);const e=l(o);g.innerHTML=`<h1 class="title-top-books">${t}</h1><div class="category-books_container">${e}</div>`,b(t)})).catch((o=>console.log(o)))}})),s("6FlSt"),s("d6S5l"),s("18VO4"),s("23Ajj"),s("9VC5X"),s("cRUDO"),s("RX4Re");var _={};_=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("9qBCW");var m={};m=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("gTCLq");var y={};y=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("7wZd0"),s("fkNhc"),s("gQOBw"),s("gQOBw"),s("cokon");var v=s("cRUDO");s("2xDiJ");const h=document.querySelector(".main"),f=document.querySelector(".modal_pop-up__container"),q=document.querySelector(".modal_pop-up__description"),w=document.querySelector(".no-description"),S=document.querySelector(".backdrop_pop-up"),$=document.querySelector(".modal_pop-up__close-btn");let E;function L(){S.classList.toggle("backdrop_pop-up--is-hidden"),S.removeEventListener("click",H),$.removeEventListener("click",L),window.removeEventListener("keydown",T),q.innerHTML=""}function T(o){"Escape"===o.code&&L()}function H(o){o.target===o.currentTarget&&L()}function x(){const o=localStorage.getItem("userdata");if(o){return JSON.parse(o)}return null}h.addEventListener("click",(async function(t){if(!t.target.closest(".top-books_quick-view"))return;const e=t.target.closest(".top-books_quick-view").getAttribute("data-bookId");E=e,console.log(e),S.classList.remove("backdrop_pop-up--is-hidden"),S.addEventListener("click",H),$.addEventListener("click",L),window.addEventListener("keydown",T),await async function(t){f.innerHTML="";try{const s=await async function(o){const t=`${C}${o}`,e=await fetch(t);if(!e.ok)throw new Error(e.statusText);return await e.json()}(t);c.save("active-book",s);const a=Boolean(c.load("selected-books")?.find((o=>o._id===s._id))),{book_image:l,title:i,author:r,description:d,buy_links:p}=s;w.innerHTML=""===d?"We hope you will love it":"";const u=`<div class="modal-info">\n    <img class="book__img" src="${l}" alt="${i}"/>\n    <div class="modal-info__box">\n       <h2 class="book__title">${i}</h2>\n       <h3 class="book__author">${r}</h3>\n       <p class="book__description">${d}</p>\n       <ul class="list seller__list">\n         <li>\n              <a class="seller__link" href="${p[0].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Amazon">\n                <img src="${o(_)}" alt="amazon" />\n              </a>\n            </li>\n            <li>\n              <a class="seller__link" href="${p[1].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Apple-books">\n                <img src="${o(m)}" alt="apple-books" />\n              </a>\n            </li>\n            <li>\n              <a class="seller__link" href="${p[4].url}" target="_blank" crossorigin="anonymous"  rel="noopener noreferrer" aria-label="Bookshop">\n                <img src="${o(y)}" alt="bookshop" />\n              </a>\n            </li>\n       </ul>\n       </div>\n    </div>\n    <button class="btn modal__btn-add" type="button"\n    data-bookId='${t}'>${a?"remove from the shopping list":"add to shopping list"}</button>\n    <button class="btn modal__btn-remove" data-bookId='${t}' type="button">remove from the shopping list</button>\n    <p class="modal__btn-text">Сongratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”.</p>\n    <p class="modal__btn-need-login">First you need to login</p>`;f.innerHTML=u;const b=document.querySelector(".modal__btn-remove"),g=document.querySelector(".modal__btn-need-login"),k=document.querySelector(".modal__btn-add"),h=document.querySelector(".modal__btn-text");function e(o){x().books.map((t=>{t===o&&(b.style.display="block",k.style.display="none",h.style.display="none")}))}function n(){x()||(g.style.display="block",b.style.display="none",k.style.display="none")}k.addEventListener("click",(o=>{const t=o.target.getAttribute("data-bookId");(0,v.addbooktosl)(t),b.style.display="block",k.style.display="none",h.style.display="block",setTimeout((()=>{h.style.display="none"}),6500)})),b.addEventListener("click",(o=>{const t=o.target.getAttribute("data-bookId");(0,v.removeBook)(t),b.style.display="none",k.style.display="block",h.style.display="none"})),n(),e(t);!function(o){for(let t=0;t<o.length;t++){o[t].addEventListener("click",(function(o){o.preventDefault(),window.open(this.href)}))}}(document.querySelectorAll(".modal__link"))}catch(q){console.log(q)}}(e)})),$.addEventListener("click",L),console.log(x());const C="https://books-backend.p.goit.global/books/"}();
//# sourceMappingURL=index.cd0c2ca8.js.map
