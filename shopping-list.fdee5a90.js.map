{"mappings":"AAAoBA,SAASC,cAAc,sBAA3C,MACMC,EAASF,SAASC,cAAc,sBAGhCE,EAAQC,KAAKC,MAAMC,aAAaC,QAAQ,mBAAqB,GAwGnE,SAASC,EAA4BC,GACnC,OAAOA,EACJC,KACCC,GACE,uCAAuCA,EAAKC,4BACpCD,EAAKE,oBAAoBF,EAAKG,oCACpCH,EAAKG,2BACLH,EAAKI,8BACNJ,EAAKK,gCACJL,EAAKM,oFAEAN,EAAKO,oDACLP,EAAKQ,UAAU,GAAGC,oCAClBT,EAAKQ,UAAU,GAAGC,gCAG5BC,KAAK,GACV,CAxHAnB,EAAOoB,UAAYd,EAA4BL","sources":["src/js/shopping-list.js"],"sourcesContent":["const containerEl = document.querySelector('.js-container-list');\nconst listEl = document.querySelector('.js-listInShopping');\n\nconst arrToShoppingList = [];\nconst array = JSON.parse(localStorage.getItem('shopping-list')) ?? [];\nlistEl.innerHTML = createMarkupBooksInShopping(array);\n// const btnDelete = document.querySelector('.js-li-shopping');\n\n// apiFetch().then(data =>\n//   containerEl.insertAdjacentHTML('beforeend', createMarkupTopBooks(data))\n// );\n\n// containerEl.addEventListener('click', addToShoppingList);\n// listEl.addEventListener('click', onClickBtnDelete);\n\nfunction onClickBtnDelete(evt) {\n  if (evt.target.classList.contains('js-delete')) {\n    const li = evt.target.closest('.js-li-shopping');\n    const id = li.dataset.id;\n    console.log(id);\n    // const masShop = array.filter(item => item._id !== id);\n    // console.log(masShop);\n    // listEl.innerHTML = createMarkupBooksInShopping(masShop);\n    const index = array.findIndex(item => item._id === id);\n    console.log(array[index]);\n    array.splice(index, 1);\n    console.log(array);\n    localStorage.setItem('shopping-list', JSON.stringify(array));\n    listEl.innerHTML = createMarkupBooksInShopping(array);\n  }\n}\n\nfunction addToShoppingList(evt) {\n  evt.preventDefault();\n  if (!evt.target.classList.contains('js-addToShopping')) {\n    return;\n  }\n\n  const li = evt.target.closest('.js-card');\n  const id = li.dataset.id;\n\n  apiFetchCate(id).then(data => {\n    const inShoppingList = array.some(item => li.dataset.id === item._id);\n    if (inShoppingList) {\n      return;\n    }\n    array.push(data);\n    console.log(array);\n    localStorage.setItem('shopping-list', JSON.stringify(array));\n    listEl.innerHTML = createMarkupBooksInShopping(array);\n  });\n\n  const mas = document.querySelectorAll('.js-card');\n\n  const findEl = [...mas].find(item => item.dataset.id === id);\n\n  //   const inShoppingList = arrToShoppingList.some(\n  //     item => item.dataset.id === findEl.dataset.id\n  //   );\n\n  //   if (inShoppingList) {\n  //     return;\n  //   }\n  //   const inShoppingList = arrToShoppingList.some(\n  //     item => li.dataset.id === item.dataset.id\n  //   );\n  //   if (inShoppingList) {\n  //     return;\n  //   }\n  //   arrToShoppingList.push(li);\n  //   console.log(arrToShoppingList);\n\n  // listEl.insertAdjacentElement('beforeend', arrToShoppingList[0])\n  //   listEl.append(...arrToShoppingList);\n}\n\nfunction apiFetch() {\n  return fetch('https://books-backend.p.goit.global/books/top-books').then(\n    resp => resp.json()\n  );\n}\n\nfunction createMarkupTopBooks(books) {\n  return books\n    .map(book => {\n      const booksArr = book.books\n        .map(\n          bookOne => `<li class='js-card' data-id=${bookOne._id}>\n\t\t\t\t<h2>${book.list_name}</h2>\n\t\t\t\t<img src=\"${bookOne.book_image}\" alt=\"\" width='180'>\n\t\t\t\t<p>${bookOne.author}</p>\n\t\t\t\t<button class='js-addToShopping'>Add to shopping list</button>\n\t\t\t</li>`\n        )\n        .join('');\n      return `<ul>${booksArr}</ul>`;\n    })\n    .join('');\n}\n\n// // const listEl = document.querySelector('.js-listInShopping');\n\nfunction apiFetchCate(id) {\n  return fetch(`https://books-backend.p.goit.global/books/${id}`).then(resp =>\n    resp.json()\n  );\n}\n\nfunction createMarkupBooksInShopping(books) {\n  return books\n    .map(\n      book =>\n        `<li class='js-li-shopping' data-id='${book._id}'>\n\t\t\t\t<img src=\"${book.book_image}\" alt=\"${book.title}\" width='116'>\n\t\t\t\t<h2>${book.title}</h2>\n\t\t\t\t<h3>${book.list_name}</h3>\n\t\t\t\t<p>${book.description}</p>\n\t\t\t\t<h3>${book.author}</h3>\n\t\t\t\t<button class='js-delete'>Delete</button>\n\t\t\t\t<a href=\"${book.amazon_product_url}\">Amazon</a>\n\t\t\t\t<a href=\"${book.buy_links[1].url}\">Book1</a>\n\t\t\t\t<a href=\"${book.buy_links[2].url}\">Book2</a>\n\t\t\t</li>`\n    )\n    .join('');\n}\n\nexport { array };\n"],"names":["document","querySelector","$e5c62ffd1c5d842f$var$listEl","$e5c62ffd1c5d842f$export$2f23118c22fb2630","JSON","parse","localStorage","getItem","$e5c62ffd1c5d842f$var$createMarkupBooksInShopping","books","map","book","_id","book_image","title","list_name","description","author","amazon_product_url","buy_links","url","join","innerHTML"],"version":3,"file":"shopping-list.fdee5a90.js.map"}